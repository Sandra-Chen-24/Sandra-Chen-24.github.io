<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cert-Manager on Sandra Chen Blog</title><link>https://sandra-chen-24.github.io/categories/cert-manager/</link><description>Recent content in Cert-Manager on Sandra Chen Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><lastBuildDate>Thu, 11 Dec 2025 15:30:00 +0800</lastBuildDate><atom:link href="https://sandra-chen-24.github.io/categories/cert-manager/index.xml" rel="self" type="application/rss+xml"/><item><title>cert-manager</title><link>https://sandra-chen-24.github.io/blog/cert-manager/cert-manager/</link><pubDate>Thu, 11 Dec 2025 15:30:00 +0800</pubDate><guid>https://sandra-chen-24.github.io/blog/cert-manager/cert-manager/</guid><description>&lt;h2 id="è‡ªå‹•åŒ–ç”³è«‹å…è²»çš„-lets-encrypt-æ†‘è­‰"&gt;è‡ªå‹•åŒ–ç”³è«‹å…è²»çš„ Let&amp;rsquo;s Encrypt æ†‘è­‰
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ğŸ’¡ é‹ä½œåŸç†ï¼šDNS-01 æŒ‘æˆ°(Challenge)è‡ªå‹•åŒ–&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;cert-manager ç”¢ç”Ÿä¸€å€‹éš¨æ©Ÿå­—ç¬¦ä¸²&lt;/li&gt;
&lt;li&gt;å°‡è©²å­—ç¬¦ä¸²ä»¥ä¸€æ¢ç‰¹æ®Šçš„ TXT ç´€éŒ„çš„å½¢å¼ç™¼ä½ˆåˆ°æ‚¨çš„ DNS æœå‹™å™¨ä¸Š&lt;/li&gt;
&lt;li&gt;å¦‚æœ Let&amp;rsquo;s Encrypt èƒ½å¤ åœ¨ DNS æœå‹™å™¨ä¸Šæ‰¾åˆ°é€™æ¢æ­£ç¢ºçš„ TXT ç´€éŒ„ï¼Œå°±è­‰æ˜æ‚¨æ“æœ‰ç¶²åŸŸï¼Œç„¶å¾Œé ’ç™¼æ†‘è­‰&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class="link" href="https://charts.jetstack.io" target="_blank" rel="noopener"
 &gt;Chart_cert-manager&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¯ Kubernetes çš„è‡ªå‹•æ†‘è­‰ç®¡ç†å·¥å…·ï¼Œæœ€çµ‚èˆ‡ Ingress ç­‰è³‡æºæ•´åˆï¼Œå¯¦ç¾æ‡‰ç”¨ç¨‹å¼çš„ TLS åŠ å¯†èˆ‡è‡ªå‹•çºŒæœŸï¼Œç°¡åŒ– HTTPS éƒ¨ç½²&lt;/li&gt;
&lt;li&gt;å»ºç«‹ Resource [roles, rolebindings, clusterroles, clusterrolebindings, serviceaccounts, deployment, service]
&lt;ul&gt;
&lt;li&gt;cert-managerï¼šæ‰®æ¼”è‘—æ•´å€‹ç³»çµ±çš„å¤§è…¦å’Œå”èª¿è€…
&lt;ul&gt;
&lt;li&gt;æ ¹æ“š Certificate è³‡æºçš„å®šç¾©ï¼Œå•Ÿå‹•èˆ‡ ACME ä¼ºæœå™¨ (å¦‚ Let&amp;rsquo;s Encrypt) æºé€šçš„æµç¨‹&lt;/li&gt;
&lt;li&gt;è² è²¬å‰µå»º Challenge è³‡æºï¼ˆä¾‹å¦‚ DNS-01 æŒ‘æˆ°ï¼‰ï¼Œä¸¦ç­‰å¾… ExternalDNS æˆ– HTTP-01 æœå‹™å®Œæˆé©—è­‰&lt;/li&gt;
&lt;li&gt;è¿½è¹¤æ†‘è­‰çš„åˆ°æœŸæ—¥ï¼Œä¸¦åœ¨æ†‘è­‰åˆ°æœŸå‰è‡ªå‹•å•Ÿå‹•çºŒæœŸæµç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;cert-manager-cainjector
&lt;ul&gt;
&lt;li&gt;ç•¶ cert-manager å‰µå»ºæˆ–æ›´æ–°è‡ªèº«çš„ CA æ†‘è­‰æ™‚ï¼Œcainjector æœƒè‡ªå‹•å°‡é€™äº› CA æ†‘è­‰æ³¨å…¥åˆ°ä¸Šè¿°ç›®æ¨™è³‡æºä¸­ï¼Œç¢ºä¿å®ƒå€‘èƒ½å¤ æ­£ç¢ºåœ°ä¿¡ä»»å’Œèˆ‡ cert-manager çš„ Webhook (æˆ–å…¶ä»–æœå‹™) é€²è¡Œ TLS é€šè¨Š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;cert-manager-webhookï¼šæ‰®æ¼”è‘—å®ˆé–€å“¡çš„è§’è‰²ï¼Œç¢ºä¿åªæœ‰æœ‰æ•ˆçš„ã€æ ¼å¼æ­£ç¢ºçš„ cert-manager è³‡æºæ‰èƒ½é€²å…¥ Cluster
&lt;ul&gt;
&lt;li&gt;åœ¨ä½¿ç”¨è€…å‰µå»ºæˆ–ä¿®æ”¹ Certificateã€Issuer ç­‰è³‡æºæ™‚ï¼Œåœ¨è³‡æºè¢«å¯«å…¥ etcd ä¹‹å‰ï¼Œå°å…¶é€²è¡Œåš´æ ¼çš„é©—è­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å»ºç«‹ CRDs
&lt;ul&gt;
&lt;li&gt;CertificateRequest&lt;/li&gt;
&lt;li&gt;Certificate&lt;/li&gt;
&lt;li&gt;Challenge&lt;/li&gt;
&lt;li&gt;ClusterIssuer&lt;/li&gt;
&lt;li&gt;Issuer&lt;/li&gt;
&lt;li&gt;Order&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;letsencrypt è¨­å®š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Issuer(é ’ç™¼è€…):è¨‚ç¾©æ†‘è­‰ä¾†æºï¼ˆå¦‚ Let&amp;rsquo;s Encryptã€è‡ªç°½ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Issuer ä½œç”¨ç¯„åœç‚ºç‰¹å®š Namespace&lt;/li&gt;
&lt;li&gt;ClusterIssuer ä½œç”¨ç¯„åœç‚ºæ•´å€‹ Cluster
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¨­å®š solvers [external-dns]&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# --- DNS-01 æŒ‘æˆ°é…ç½® ---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; solvers:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - dns01:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # cert-manager å°‡å‘¼å«æ­¤ DNS æœå‹™å•†çš„ API
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; clouddns:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # æ‚¨çš„ GCP å°ˆæ¡ˆ ID
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; project: my-gcp-project-id
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Certificate:è²æ˜ä½ æƒ³è¦ä»€éº¼æ¨£çš„æ†‘è­‰ï¼ˆä¾‹å¦‚ï¼šexample.com çš„æ†‘è­‰ï¼‰ï¼Œæ†‘è­‰ç°½ç™¼å¾Œæœƒå°‡ .crt (æ†‘è­‰) å’Œ .key (ç§é‘°) å„²å­˜ç‚º Secret&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€æ—¦ Certificate è³‡æºè¢«å‰µå»ºï¼Œcert-manager å°±æœƒå•Ÿå‹• DNS-01 æµç¨‹ï¼ŒExternalDNS æœƒè‡ªå‹•åœ¨æ‚¨çš„ DNS æœå‹™å•†ä¸Šå‰µå»º TXT ç´€éŒ„ï¼Œå®Œæˆé©—è­‰ä¸¦è‡ªå‹•é ’ç™¼æ†‘è­‰åˆ° my-app-tls-secret ä¸­
&lt;a class="link" href="https://kubernetes-sigs.github.io/external-dns" target="_blank" rel="noopener"
 &gt;Chart_external-dns&lt;/a&gt;
-&amp;gt; æœƒè‡ªå‹•å»ºç«‹ Cloud DNS ä¸Šçš„è³‡è¨Š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class="link" href="https://github.com/emberstack/helm-charts" target="_blank" rel="noopener"
 &gt;Chart_Kubernetes-Reflector&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://github.com/emberstack/kubernetes-reflector" target="_blank" rel="noopener"
 &gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æ˜¯ä¸€å€‹å°ˆé–€è¨­è¨ˆç”¨æ–¼è‡ªå‹•åŒ– Secret å’Œ ConfigMap åŒæ­¥çš„æ§åˆ¶å™¨ï¼Œå…è¨±åœ¨é›†ä¸­çš„ Namespace ä¸­å®šç¾© Secret æˆ– ConfigMapï¼Œç„¶å¾Œ Reflector æœƒå°‡è‡ªå‹•è¤‡è£½ï¼ˆæˆ–ç¨±ã€Œåå°„ã€ï¼‰åˆ°æ‚¨æŒ‡å®šçš„å…¶ä»–ç›®æ¨™ (Target) Namespaces ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# æœ‰é€™å€‹ annotations å°±æœƒåŒæ­¥åˆ°å…¶ä»– ns
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;annotations:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; reflector.v1.k8s.emberstack.com/auto-reflects: &amp;#34;True&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>
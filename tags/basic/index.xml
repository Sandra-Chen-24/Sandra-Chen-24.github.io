<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Basic on Sandra Chen Blog</title><link>https://sandra-chen-24.github.io/tags/basic/</link><description>Recent content in Basic on Sandra Chen Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><lastBuildDate>Thu, 06 Nov 2025 13:30:00 +0800</lastBuildDate><atom:link href="https://sandra-chen-24.github.io/tags/basic/index.xml" rel="self" type="application/rss+xml"/><item><title>kafka</title><link>https://sandra-chen-24.github.io/blog/kafka/kafka/</link><pubDate>Thu, 06 Nov 2025 13:30:00 +0800</pubDate><guid>https://sandra-chen-24.github.io/blog/kafka/kafka/</guid><description>&lt;p&gt;&lt;a class="link" href="https://watermill.io/pubsubs/kafka/" target="_blank" rel="noopener"
 &gt;watermill&lt;/a&gt;
&lt;a class="link" href="https://github.com/cyg-pd/go-watermillx" target="_blank" rel="noopener"
 &gt;watermill pd ç¯„ä¾‹&lt;/a&gt;&lt;/p&gt;</description></item><item><title>gateway api vs api gateway</title><link>https://sandra-chen-24.github.io/blog/gateway/basic/</link><pubDate>Fri, 31 Oct 2025 15:30:00 +0800</pubDate><guid>https://sandra-chen-24.github.io/blog/gateway/basic/</guid><description>&lt;h2 id="api-gateway"&gt;API Gateway
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ä½œç‚ºæ‰€æœ‰ API è«‹æ±‚çš„å…¥å£ï¼ˆentry pointï¼‰&lt;/li&gt;
&lt;li&gt;æä¾›ï¼š
&lt;ul&gt;
&lt;li&gt;Routingï¼ˆä¾è·¯å¾‘å°å‘ä¸åŒæœå‹™ï¼‰&lt;/li&gt;
&lt;li&gt;Authentication / Authorization&lt;/li&gt;
&lt;li&gt;Rate limiting&lt;/li&gt;
&lt;li&gt;Caching&lt;/li&gt;
&lt;li&gt;Logging / Metrics&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¸¸è¦‹å¯¦ä½œï¼š
&lt;ul&gt;
&lt;li&gt;AWS API Gateway&lt;/li&gt;
&lt;li&gt;Kong&lt;/li&gt;
&lt;li&gt;NGINX Gateway&lt;/li&gt;
&lt;li&gt;Istio Gatewayï¼ˆåœ¨ Service Mesh æ¶æ§‹ä¸­ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="gateway-api"&gt;Gateway API
&lt;/h2&gt;&lt;p&gt;&lt;a class="link" href="https://gateway-api.sigs.k8s.io/" target="_blank" rel="noopener"
 &gt;å®˜æ–¹æ–‡ä»¶&lt;/a&gt;
&lt;a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/standalone-neg?hl=zh-tw#uses_with" target="_blank" rel="noopener"
 &gt;neg&lt;/a&gt;
&lt;a class="link" href="https://hackmd.io/@QI-AN/Understanding-and-Implementing-the-Kubernetes-Gateway-API" target="_blank" rel="noopener"
 &gt;t&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kubernetes å®˜æ–¹çš„æ–°ä¸€ä»£ç¶²è·¯ API æ¨™æº–ï¼Œç”¨ä¾†å–ä»£æ—©æœŸçš„ Ingressï¼Œæ˜¯ä¸€çµ„ Kubernetes CRDï¼ˆCustom Resource Definitionï¼‰&lt;/li&gt;
&lt;li&gt;ä¸»è¦è³‡æºï¼š[GatewayClass -&amp;gt; Gateway -&amp;gt; HTTPRoute -&amp;gt; Service æˆ– GatewayClass -&amp;gt; Gateway -&amp;gt; TLSRoute -&amp;gt; Service]
&lt;ul&gt;
&lt;li&gt;GatewayClass&lt;/li&gt;
&lt;li&gt;Gateway -&amp;gt; å…¥å£ IP&lt;/li&gt;
&lt;li&gt;HTTPRoute&lt;/li&gt;
&lt;li&gt;TCPRoute ?&lt;/li&gt;
&lt;li&gt;UDPRoute ?&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è®“ä¸åŒå» å•†ï¼ˆä¾‹å¦‚ Istioã€NGINXã€Traefikã€HAProxyã€Linkerdï¼‰å¯ä»¥å…±ç”¨åŒä¸€å¥— Gateway è¦ç¯„ï¼Œé”æˆï¼š
&lt;ul&gt;
&lt;li&gt;çµ±ä¸€é…ç½®æ–¹å¼&lt;/li&gt;
&lt;li&gt;æ”¯æ´æ›´ç´°ç·»çš„è·¯ç”±è¦å‰‡&lt;/li&gt;
&lt;li&gt;æ”¯æ´å¤šç§Ÿæˆ¶ã€å¤š namespace ç®¡ç†&lt;/li&gt;
&lt;li&gt;æ¸…æ¥šåˆ†å±¤ï¼šInfra team ç®¡ Gatewayï¼ŒApp team ç®¡ Route&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æ¸¬è©¦æœªæ­£å¼ç”Ÿæ•ˆçš„åŸŸå"&gt;æ¸¬è©¦æœªæ­£å¼ç”Ÿæ•ˆçš„åŸŸå
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl --resolve &amp;lt;hostname&amp;gt;:&amp;lt;port&amp;gt;:&amp;lt;ip&amp;gt; &amp;lt;url&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;â¯ curl --resolve hall.vir888.com:443:35.201.227.203 https://hall.vir888.com
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl --resolve hall.epbyofzj.com:443:34.160.139.10 https://hall.epbyofzj.com/kevintest -H &amp;#39;referer: https://hall.dctest999.com&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸èƒ½åœ¨ Gateway è™•ç†æ˜¯å› ç‚º HTTPRoute rules çš„ matches åªèƒ½æœ‰ 16 å€‹&lt;/p&gt;</description></item><item><title>curl çš„æ­·ç¨‹</title><link>https://sandra-chen-24.github.io/blog/common/curl/</link><pubDate>Fri, 19 Sep 2025 15:30:00 +0800</pubDate><guid>https://sandra-chen-24.github.io/blog/common/curl/</guid><description>&lt;h2 id="ä½¿ç”¨-http-è·Ÿ-https-å·®åˆ¥"&gt;ä½¿ç”¨ HTTP è·Ÿ HTTPS å·®åˆ¥
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;geo.conf&lt;/span&gt;: |&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â geo $allowed_ip_geo {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â  Â default 0;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â  Â 34.1.1.1 @aaa;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â  Â 130.1.1.1 @bbb;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â map $allowed_ip_geo$host $valid_request {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â  Â default 0;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â  Â &amp;#34;@bbbhall.bbb999.com&amp;#34; 1;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â  Â &amp;#34;@aaahall.aaa888.com&amp;#34; 1;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; Â }&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# hall.aaa888.com æœ‰è§£æï¼Œhall.bbb999.com æ²’æœ‰è§£æ
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;â­ ## æœ‰è§£æçš„ host ä½¿ç”¨ https è·Ÿ http å·®åˆ¥
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[hall.aaa888.com æ‡‰è©²ä½¿ç”¨ 34.1.1.1 å…¥å£ï¼Œæƒ³æ¨¡æ“¬ä½¿ç”¨ 130.1.1.1 è¢«é˜»æ“‹]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ğŸ’¡ ### http
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl http://130.1.1.1 -H &amp;#39;host: hall.aaa888.com&amp;#39; -vvv -kL
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; HTTP/1.1 301 Moved Permanently
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; Location: https://hall.aaa888.com:443/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;* Issue another request to this URL: &amp;#39;https://hall.aaa888.com:443/&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; HTTP/1.1 200 OK
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;* Connection #1 to host hall.aaa888.com left intact
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ğŸ’¡ ### https
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl https://130.1.1.1 -H &amp;#39;host: hall.aaa888.com&amp;#39; -vvv -kL
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; HTTP/1.1 403 Forbidden
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;* Connection #0 to host 130.1.1.1 left intact
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ğŸ“Œ -&amp;gt; http æœƒé‡åˆ° 301 ç„¶å¾Œç”¨ host çš„ç¶²å€æ˜¯è§£æè½‰å°ï¼Œå› ç‚ºæœ‰è¨­å®š 80 å¼·è½‰ 443
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;â­ ## æ²’è§£æçš„ host ä½¿ç”¨ https è·Ÿ http å·®åˆ¥
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ğŸ”ğŸ”ğŸ” è¨­å®šæ­£ç¢º IPï¼Œè·Ÿæœ‰è§£ææƒ…å¢ƒåŒ
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[æœ¬åœ°è¨­å®šï¼š130.1.1.1 hall.bbb999.com]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ğŸ’¡ ### http
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl http://34.1.1.1 -H &amp;#39;host: hall.bbb999.com&amp;#39; -vvv -kL
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; HTTP/1.1 301 Moved Permanently
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; Location: https://hall.bbb999.com:443/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;* Issue another request to this URL: &amp;#39;https://hall.bbb999.com:443/&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; HTTP/1.1 200 OK
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;* Connection #1 to host hall.bbb999.com left intact
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ğŸ’¡ ### https
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl https://34.1.1.1 -H &amp;#39;host: hall.bbb999.com&amp;#39; -vvv -kL
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; HTTP/1.1 403 Forbidden
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;* Connection #0 to host 34.1.1.1 left intact
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ğŸ”ğŸ”ğŸ” è¨­å®šéŒ¯èª¤ç¢º IP
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[æœ¬åœ°è¨­å®šï¼š34.1.1.1 hall.bbb999.com]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ğŸ’¡ ### http
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl http://34.1.1.1 -H &amp;#39;host: hall.bbb999.com&amp;#39; -vvv -kL
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; HTTP/1.1 301 Moved Permanently
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; Location: https://hall.bbb999.com:443/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;* Issue another request to this URL: &amp;#39;https://hall.bbb999.com:443/&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; HTTP/1.1 403 Forbidden
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ğŸ’¡ ### https
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl https://34.1.1.1 -H &amp;#39;host: hall.bbb999.com&amp;#39; -vvv -kL
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;lt; HTTP/1.1 403 Forbidden
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;* Connection #0 to host 34.1.1.1 left intact
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-&amp;gt; ç­‰åŒæ–¼ curl https://hall.bbb999.com -k
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>kube-dns</title><link>https://sandra-chen-24.github.io/blog/kube-dns/kube-dns/</link><pubDate>Wed, 17 Sep 2025 15:30:00 +0800</pubDate><guid>https://sandra-chen-24.github.io/blog/kube-dns/kube-dns/</guid><description>&lt;h2 id="nodelocaldns"&gt;NodeLocalDNS
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;dnsmasq_hits_count è·Ÿ dnsmasq_misses_count ä¸»è¦ç”¨ä¾†åæ˜ å¿«å–æ•ˆç›Šï¼Œå‘½ä¸­å°±ä¸éœ€è¦å¾€ä¸Šæ¸¸ CoreDNS/KubeDNS æˆ–å¤–éƒ¨ DNS æŸ¥&lt;/li&gt;
&lt;li&gt;dnsmasq_hits_count / (dnsmasq_hits_count + dnsmasq_misses_count) * 100
-&amp;gt; å¦‚æœå‘½ä¸­ç‡ &amp;gt; 80%ï¼Œä»£è¡¨å¤§éƒ¨åˆ†çš„æŸ¥è©¢éƒ½è¢«å¿«å–è§£æ±º&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="kube-dns-autoscaler-çš„è¨­å®š"&gt;kube-dns-autoscaler çš„è¨­å®š
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;apiVersion&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;v1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;kind&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;ConfigMap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;metadata&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;kube-dns-autoscaler&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;namespace&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;kube-system&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;data&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;linear&lt;/span&gt;: |-&lt;span style="color:#e6db74"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;coresPerReplica&amp;#34;: 256,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;nodesPerReplica&amp;#34;: 16,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;min&amp;#34;: 2,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;max&amp;#34;: 20
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; }&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;ğŸ”¹ coresPerReplica&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;æ¯å¤šå°‘å€‹ CPU Core éœ€è¦æ–°å¢ä¸€å€‹ CoreDNS å‰¯æœ¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;ğŸ”¹ nodesPerReplica&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;æ¯å¤šå°‘å€‹ Node éœ€è¦æ–°å¢ä¸€å€‹å‰¯æœ¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;ğŸ‘‰ autoscaler æœƒå–å…©è€…ä¸­ éœ€è¦å‰¯æœ¬æ•¸è¼ƒå¤šçš„é‚£å€‹å€¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;ğŸ”¹ min&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;kube-dns/CoreDNS æœ€å°‘å‰¯æœ¬æ•¸ (é¿å…éå°é›†ç¾¤ç„¡æ³•å®¹éŒ¯)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;ğŸ”¹ max&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;kube-dns/CoreDNS æœ€å¤§å‰¯æœ¬æ•¸ (é¿å…å¤ªå¤š pod æµªè²»è³‡æº)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;ğŸ“Œ å¯¦éš›ä¾‹å­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;å‡è¨­ä½ çš„ cluster æœ‰ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;640&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;cores / 80 nodes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;è¨ˆç®—ï¼š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;coresPerReplica = 256 â†’ 640 / 256 = 3 å‰¯æœ¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;nodesPerReplica = 16 â†’ 80 / 16 = 5 å‰¯æœ¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;ğŸ‘‰ autoscaler é¸å– 5 å‰¯æœ¬ (å› ç‚ºè¦æ»¿è¶³å…©å€‹æ¢ä»¶ä¸­è¼ƒå¤§çš„éœ€æ±‚)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>é‚„æ²’æƒ³åˆ°åˆ†é¡</title><link>https://sandra-chen-24.github.io/blog/common/map/</link><pubDate>Tue, 16 Sep 2025 15:30:00 +0800</pubDate><guid>https://sandra-chen-24.github.io/blog/common/map/</guid><description>&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# $http_referer å»åŒ¹é…æ­£å‰‡è¦å‰‡ &amp;#34;~^https://(?&amp;lt;domain&amp;gt;[^/]+)&amp;#34;ï¼Œå–å‡º https:// å¾Œé¢ç¬¬ä¸€æ®µä¸å« / çš„å­—ä¸²å­˜é€² $domain
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;map $http_referer $effective_host {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; default $host;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &amp;#34;~^https://(?&amp;lt;domain&amp;gt;[^/]+)&amp;#34; $domain;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>æ©Ÿå™¨é¡å‹</title><link>https://sandra-chen-24.github.io/blog/aws/instance/</link><pubDate>Tue, 09 Sep 2025 15:30:00 +0800</pubDate><guid>https://sandra-chen-24.github.io/blog/aws/instance/</guid><description>&lt;p&gt;&lt;a class="link" href="https://instances.vantage.sh/" target="_blank" rel="noopener"
 &gt;æ©Ÿå™¨é¡å‹åŠè²»ç”¨&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="æ©Ÿå™¨é¡å‹"&gt;æ©Ÿå™¨é¡å‹
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;n:AMD (x86_64)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;g:AWS Graviton (arm64)ï¼šimage éœ€è¦æ”¯æ´ arm ä¸”èª¿æ•´è¨­å®š
-&amp;gt; ami_typeï¼šè¦ä½¿ç”¨ AL2023_ARM_64_STANDARDï¼Œé è¨­æ˜¯ AL2023_x86_64_STANDARD&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gitlab-runners-arm = {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; instance_types = [&amp;#34;m6g.medium&amp;#34;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; min_size = 1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; max_size = 2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; desired_size = 1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; capacity_type = &amp;#34;SPOT&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ami_type = &amp;#34;AL2023_ARM_64_STANDARD&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; labels = {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &amp;#34;service&amp;#34; = &amp;#34;gitlab-runner-arm&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;-&amp;gt; gitlab-runner éœ€è¦å¤šå¸¶ helper_image = &amp;ldquo;gitlab/gitlab-runner-helper:arm64-latest&amp;rdquo;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;config: |
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [[runners]]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [runners.kubernetes]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; namespace = &amp;#34;gitlab&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; image = &amp;#34;ubuntu:20.04&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; helper_image = &amp;#34;gitlab/gitlab-runner-helper:arm64-latest&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; privileged = true
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;-&amp;gt; CICD è£¡é¢ï¼Œå¦‚æœåœ¨ build æ™‚ï¼Œæœ‰ç”¨åˆ°ä»¥ä¸‹æŒ‡ä»¤ä¾†å®‰è£ kubectlï¼Œéœ€è¦ç¢ºèªæ˜¯å¦æ˜¯æ”¹ç‚º arm64&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -LO &amp;#34;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/arm64/kubectl&amp;#34; &amp;amp;&amp;amp; chmod +x ./kubectl &amp;amp;&amp;amp; mv ./kubectl /usr/local/bin/kubectl
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¶ä»– ï¼šIntel (x86_64)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>